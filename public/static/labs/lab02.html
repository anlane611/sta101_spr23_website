<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lab 02: Take Courage with Data Visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="lab02_files/libs/clipboard/clipboard.min.js"></script>
<script src="lab02_files/libs/quarto-html/quarto.js"></script>
<script src="lab02_files/libs/quarto-html/popper.min.js"></script>
<script src="lab02_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="lab02_files/libs/quarto-html/anchor.min.js"></script>
<link href="lab02_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lab02_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="lab02_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="lab02_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="lab02_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="labs.css">
</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 02: Take Courage with Data Visualization</h1>
<p class="subtitle lead">Due Thursday September 15 at 11:59pm</p>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>By the end of this lab you will effectively visualize numeric and categorical data.</p>
<section id="getting-started" class="level2">
<h2 class="anchored" data-anchor-id="getting-started">Getting started</h2>
<p>&nbsp;1. Download the lab template by pasting the code below in your <strong>console</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">"https://sta101.github.io/static/labs/lab02_template.qmd"</span>,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">destfile =</span> <span class="st">"lab02.qmd"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>&nbsp;2. Under the “Files” tab on the right hand side, click on <code>lab02.qmd</code> to open the lab template.</p>
<p>&nbsp;3. Complete the exercises below using the space provided.</p>
</section>
<section id="warm-up" class="level2">
<h2 class="anchored" data-anchor-id="warm-up">Warm up</h2>
<p>Be sure to update the YAML at the top of the document to include your name and the date.</p>
<section id="packages" class="level3">
<h3 class="anchored" data-anchor-id="packages">Packages</h3>
<p>We will use our standard</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<p>Today, we will be working with data from the first three full seasons of the NC Courage, a highly successful National Women’s Soccer League (NWSL) team located near Duke in Cary, NC. The Courage moved to the Triangle from Western New York in 2017 and had three epic seasons in NC, culminating in winning the championship game that was held at their stadium in Cary in 2019! (Data for this lab was sourced from the <code>nwslR</code> package on Github, and verified with the NC Courage website by Meredith Brown in a previous semester.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>courage <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"https://sta101.github.io/static/labs/data/courage.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="exercises" class="level2">
<h2 class="anchored" data-anchor-id="exercises">Exercises</h2>
<ol type="1">
<li><p>How many observations are there in the courage data frame? How many variables? What does each observation in the <code>courage</code> data frame represent? Write your answer as narrative under “Exercise 1”. You do not need to create a new code chunk here.</p></li>
<li><p>How many games did the Courage win, lose and tie between 2017 and 2019 seasons? Show your code in the space provided under “Exercise 2” and write your response as narrative.</p></li>
<li><p>How many points do the Courage typically win by (on average)? Use the code chunk below to get started. In the code below, <code>abs()</code> is the absolute value function. Why do we want to use this absolute value function here? Write your answers as narrative (but keep the code chunk to show your work).</p></li>
</ol>
<p>Hint: we are only interested in games the Courage win.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>courage <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">win_pts =</span> <span class="fu">abs</span>(home_pts <span class="sc">-</span> away_pts)) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(___) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(___)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>How many points do the Courage score when they win (on average)? Note this is <strong>different than how many points</strong> they “win by”. How many points do the Courage score when they lose on average? Use the code below to get started. Note that we save the mutated data frame as “courage2” so that we can access it in a future question.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>courage2 <span class="ot">=</span> courage <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">courage_pts =</span> <span class="fu">ifelse</span>(home_team <span class="sc">==</span> <span class="st">"NC"</span>, home_pts, away_pts))</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>courage2 <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(___) <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(___)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the code chunk above we use <code>ifelse</code> logic to mutate a new column.</p>
<ul>
<li><code>home_team == "NC"</code> finds all rows where the home team is NC Courage.</li>
<li>if the home team is NC Courage, then we assign the <code>courage_pts</code> column with <code>home_pts</code> otherwise (else) Courage must be the away team and we populate <code>courage_pts</code> with <code>away_pts</code>.</li>
</ul>
<ol start="5" type="1">
<li><p>Create a bar plot of Courage wins, losses and ties. Change the x-axis label to “Game outcome” and give the graph an informative title.</p></li>
<li><p>Next we’ll investigate visually whether or not NC Courage has a home-field advantage. To start, let’s build on the <code>courage2</code> data frame. Add a new column called <code>home_courage</code> that takes the value “home” if Courage is the home team and “away” if Courage is the away team. Hint: use the <code>ifelse</code> logic from exercise 4. Next, add another new column, <code>total_pts</code> that shows the sum total of points scored by both teams in a game. Finally add a third new column <code>opponent_pts</code> that shows the total points scored by the opposing team. Save your entire data frame as <code>courage3</code>.</p></li>
<li><p>Using your <code>courage3</code> data frame from the previous exercise, create a scatter plot of <code>opponent_pts</code> (y) vs <code>courage_pts</code> (x). Color the scatter plot by whether the Courage are <code>home</code> or <code>away</code>. Add <code>geom_jitter</code> as well as the line <span class="math inline">\(y=x\)</span> using the code below. Finally, <code>facet</code> your plot by season. Be sure to include informative titles for the plot, axes and legend. What does the line represent? What does it mean for a point to fall above the line? Below the line? Write your answer in your lab narrative.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data-here %&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(...code here...) <span class="sc">+</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># insert faceting/labels code here +</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.1</span>, <span class="at">height =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope=</span><span class="dv">1</span>, <span class="at">intercept=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="8" type="1">
<li><p>How many home games did Courage play in the 2017-2019 seasons? How many away games? Hint: use <code>courage3</code> to answer this question. Be sure to show your work (code) and answer the question (narrative).</p></li>
<li><p>What proportion of <strong>home</strong> games do Courage win? What proportion of <strong>away</strong> games do Courage win? Hint: use <code>courage3</code> and <code>count</code> as part of your solution. Do you think this is evidence of a home-field advantage? Why or why not?</p></li>
</ol>
</section>
<section id="a-look-at-where-were-headed" class="level2">
<h2 class="anchored" data-anchor-id="a-look-at-where-were-headed">A look at where we’re headed…</h2>
<ol start="10" type="1">
<li>If we want to formally test whether or not the Courage have a home-field advantage, then we must first define what this means! In your own words, what do you think a home-field advantage means?</li>
</ol>
<ul>
<li>Now that you’ve defined what it means to have a home field advantage, define what it means to <strong>not</strong> have a home-field advantage.</li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>While there is a right answer, this part is graded for completion, so don’t worry too much about answering this in <em>exactly</em> the right way. Although graded for completion, your response must make sense to receive full points.</p>
</div>
</div>
<p>We’ll pick-up here in a future class.</p>
</section>
<section id="formatting" class="level2">
<h2 class="anchored" data-anchor-id="formatting">Formatting</h2>
<p><strong>Reminder</strong>: For all assignments in this course there is a “formatting” component to the grade. To receive full points for “formatting”, you must:</p>
<p>&nbsp;1. Have your name (and team name if appropriate) at the top of the rendered document</p>
<p>&nbsp;2. Pipes <code>%&gt;%</code> and ggplot layers <code>+</code> should be followed by a newline (see formatting above)</p>
<p>&nbsp;3. Your code should be under the 80 character code limit. (You shouldn’t have to scroll to see all your code on the rendered document).</p>
<p>&nbsp;4. All exercises and corresponding pages should be linked on gradescope.</p>
<p>These necessary “tidyverse” style choices are good general practice and will help make your code more legible. For a more extensive list of recommended guidelines, <a href="https://style.tidyverse.org/">click here</a>.</p>
</section>
<section id="submitting-to-gradescope" class="level2">
<h2 class="anchored" data-anchor-id="submitting-to-gradescope">Submitting to gradescope</h2>
<p>In this class, we will submit <code>.pdf</code> documents to Gradescope. Once you are fully satisfied with your lab, render to .pdf to create a .pdf document. You may notice that the formatting/theme of the report has changed – this is expected. Remember – you must turn in a .pdf file to the Gradescope page before the submission deadline for credit. To submit your assignment:</p>
<ul>
<li><p>Go to http://www.gradescope.com and click Log in in the top right corner. - Click <code>School Credentials</code>, <code>Duke NetID</code> and log in using your NetID credentials.</p></li>
<li><p>Click on your STA 101 course.</p></li>
<li><p>Click on the assignment, and you’ll be prompted to submit it.</p></li>
<li><p>Mark the pages associated with each exercise. All of the papers of your lab should be associated with at least one question (i.e., should be “checked”). - Select all pages of your .pdf submission to be associated with the “Formatting” section.</p></li>
</ul>
<p>Grading</p>
<p>Total: 50 pts.</p>
<pre><code>Exercise 1: 2pts

Exercise 2: 4pts

Exercise 3: 6pts

Exercise 4: 4pts

Exercise 5: 6pts

Exercise 6: 6pts

Exercise 7: 8pts

Exercise 8: 3pts

Exercise 9: 3pts

Exercise 10: 2pts


Workflow and formatting:  6pts</code></pre>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>