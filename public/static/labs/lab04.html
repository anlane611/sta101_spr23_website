<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="STA 101">

<title>Lab 04: Seoul Bicycle Share</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="lab04_files/libs/clipboard/clipboard.min.js"></script>
<script src="lab04_files/libs/quarto-html/quarto.js"></script>
<script src="lab04_files/libs/quarto-html/popper.min.js"></script>
<script src="lab04_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="lab04_files/libs/quarto-html/anchor.min.js"></script>
<link href="lab04_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lab04_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="lab04_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="lab04_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="lab04_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="labs2.css">
</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 04: Seoul Bicycle Share</h1>
<p class="subtitle lead">Due Thursday October 6 at 11:59pm</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>STA 101 </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<p>By the end of this lab you will</p>
<ul>
<li>build interaction effects models</li>
<li>select between competing models</li>
<li>build a logistic regression model and assess its performance</li>
<li>make predictions using your model</li>
</ul>
<section id="getting-started" class="level2">
<h2 class="anchored" data-anchor-id="getting-started">Getting started</h2>
<p>&nbsp;1. Download the lab template by pasting the code below in your <strong>console</strong>:</p>
<pre><code>download.file("https://sta101-fa22.netlify.app/static/labs/lab04_template.Rmd",
              destfile = "lab04.qmd")</code></pre>
<p>&nbsp;2. Under the “Files” tab on the right hand side, click on <code>lab04.qmd</code> to open the lab template.</p>
<p>&nbsp;3. Complete the exercises below using the space provided.</p>
</section>
<section id="warm-up" class="level2">
<h2 class="anchored" data-anchor-id="warm-up">Warm up</h2>
<p>Be sure to update the YAML at the top of the document to include your name and the date.</p>
<section id="packages" class="level3">
<h3 class="anchored" data-anchor-id="packages">Packages</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<p>Load the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Seoul_Bikes <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"https://sta101-fa22.netlify.app/static/appex/data/Seoul_Bikes.csv"</span>) </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>Seoul_Calendar <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"https://sta101-fa22.netlify.app/static/appex/data/Seoul_Calendar.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Today’s data set was originally analyzed in two studies<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> of predicting bike-rental usage in Seoul, South Korea. For this lab, the data was sourced from <a href="https://archive.ics.uci.edu">UCI Machine Learning Repository</a>.</p>
<p>Code book:</p>
<ul>
<li><code>Date</code>: the date</li>
<li><code>rented_bikes</code>: total number of bikes rented on a given day</li>
<li><code>temp_c</code>: mean daily temperature (Celcius)</li>
<li><code>humidity_pct</code>: mean daily humidity</li>
<li><code>wind_speed</code>: mean daily windspeed</li>
<li><code>snowfall_cm</code>: mean daily snowfall (in cm)</li>
<li><code>season</code>: the season</li>
<li><code>holiday</code>: whether or not the day is a holiday</li>
</ul>
</section>
</section>
<section id="exercises" class="level2">
<h2 class="anchored" data-anchor-id="exercises">Exercises</h2>
<ol type="1">
<li>Use an appropriate <code>join</code> to combine the two data sets into one data set called <code>bikes</code>. <code>bikes</code> should have 365 observations and 8 variables.</li>
</ol>
<div class="cell">

</div>
<ol start="2" type="1">
<li><p>Does the total number of <code>rented_bikes</code> vary by <code>season</code>? Create a meaningful visual to back-up your claim. Comment on your plot. Be sure to label axes and give your plot a title.</p></li>
<li><p>Seoul Bikesharing Co.&nbsp;wants to predict how many bikes they will rent on a given day using the data in <code>bikes</code>. They are particularly interested in how important the weather is in determining whether or not people will rent their bikes. Seoul Bikesharing Co.&nbsp;asks you and your friend to develop the best linear model you can with temperature, humidity, wind speed and snowfall as predictors.</p></li>
</ol>
<p>To begin, your friend builds a <strong>main effects</strong> model using <strong>forward selection</strong>.</p>
<ul>
<li>In your own words, what does this mean?</li>
</ul>
<p>Your friend’s code to build a main effects model using forward selection is given below.</p>
<ul>
<li><p>Find the AIC for each of your friend’s fitted models.</p></li>
<li><p>In <strong>one</strong> of the <strong>steps</strong> below your friend adds the wrong predictor. Identify your friend’s mistake and fix it.</p></li>
<li><p>Which model (of the forward selection procedure <em>after</em> your correct your friend’s mistake) performs the best?</p></li>
</ul>
<section id="step-1-of-forward-selection" class="level4">
<h4 class="anchored" data-anchor-id="step-1-of-forward-selection">Step 1 of forward selection</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>bike_fit_1_1 <span class="ot">=</span> bike_fit <span class="ot">=</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(rented_bikes <span class="sc">~</span> temp_c, <span class="at">data =</span> bikes)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>bike_fit_1_2 <span class="ot">=</span> bike_fit <span class="ot">=</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(rented_bikes <span class="sc">~</span> humidity_pct, <span class="at">data =</span> bikes)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>bike_fit_1_3 <span class="ot">=</span> bike_fit <span class="ot">=</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(rented_bikes <span class="sc">~</span> wind_speed, <span class="at">data =</span> bikes)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>bike_fit_1_4 <span class="ot">=</span> bike_fit <span class="ot">=</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(rented_bikes <span class="sc">~</span> snowfall_cm, <span class="at">data =</span> bikes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-2-of-forward-selection" class="level4">
<h4 class="anchored" data-anchor-id="step-2-of-forward-selection">Step 2 of forward selection</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>bike_fit_2_1 <span class="ot">=</span> bike_fit <span class="ot">=</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(rented_bikes <span class="sc">~</span> temp_c <span class="sc">+</span> snowfall_cm, <span class="at">data =</span> bikes)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>bike_fit_2_2 <span class="ot">=</span> bike_fit <span class="ot">=</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(rented_bikes <span class="sc">~</span> temp_c <span class="sc">+</span> humidity_pct, <span class="at">data =</span> bikes)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>bike_fit_2_3 <span class="ot">=</span> bike_fit <span class="ot">=</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(rented_bikes <span class="sc">~</span> temp_c <span class="sc">+</span> wind_speed, <span class="at">data =</span> bikes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-3-of-forward-selection" class="level4">
<h4 class="anchored" data-anchor-id="step-3-of-forward-selection">Step 3 of forward selection</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>bike_fit_3_1 <span class="ot">=</span> bike_fit <span class="ot">=</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(rented_bikes <span class="sc">~</span> temp_c <span class="sc">+</span> wind_speed <span class="sc">+</span> snowfall_cm, <span class="at">data =</span> bikes)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>bike_fit_3_2 <span class="ot">=</span> bike_fit <span class="ot">=</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(rented_bikes <span class="sc">~</span> temp_c <span class="sc">+</span> wind_speed <span class="sc">+</span> humidity_pct, <span class="at">data =</span> bikes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-4-of-forward-selection" class="level4">
<h4 class="anchored" data-anchor-id="step-4-of-forward-selection">Step 4 of forward selection</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>bike_fit_full <span class="ot">=</span> bike_fit <span class="ot">=</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(rented_bikes <span class="sc">~</span> temp_c <span class="sc">+</span> humidity_pct <span class="sc">+</span> wind_speed <span class="sc">+</span> snowfall_cm, <span class="at">data =</span> bikes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li><p>In addition to your friend’s work above, you decide to run <strong>backwards elimination</strong> to construct the best model. You proceed in a similar manner as in the code above and at each step choose variables to eliminate based on AIC. Once you are complete, specify which model has the best performance. Is it the same model as the one chosen by forward stepwise selection? Will it always be the case that the models chosen through forward selection and backwards elimination coincide? Why or why not?</p></li>
<li><p>Some days the weather predicts high sales yet many fewer bikes are rented. You suspect bikes are mainly rented to commute to work and that there are fewer bikes rented on Holidays, unless the weather is very nice. You create the plot below to investigate.</p></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<p><img src="lab04_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The lines drawn in the plot above represent a regression model. Is this an <strong>main</strong> effects or an <strong>interaction</strong> effects model? How can you tell?</p>
<ul>
<li><p>Write out the full linear model, labeling <span class="math inline">\(y\)</span> and <span class="math inline">\(x\)</span> and then fit the model in <code>R</code> and print your output.</p></li>
<li><p>Next, write out the fitted model equation as two equations, one for Holidays and one for Non-holidays. Interpret the slopes in each of the two equations.</p></li>
<li><p>Does this model perform better or worse then your best model from the previous exercise?</p></li>
</ul>
<ol start="6" type="1">
<li><p>Seoul Bikesharing Co.&nbsp;say they need to rent 7000 bikes in a day to count the day as a “financial success”. Create a new column in the data set titled <code>success</code> that takes the value <code>1</code> if the day is successful and <code>0</code> if the day is unsuccessful. Save your data set with the new column as <code>bikes2</code>.</p></li>
<li><p>As a stakeholder in Seoul Bikesharing Co.&nbsp;you want to be able to tell how many financially successful days the company has, even if they stop publically publishing how many bikes they rent each day. To do this, you will build a predictive model to determine whether or not a day was successful.</p></li>
</ol>
<ul>
<li>To begin, use the code below to create a <code>train</code> and <code>test</code> data set. Be sure to use the same seed as well.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">7</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>sampleIndices <span class="ot">=</span> <span class="fu">sample.int</span>(<span class="at">n =</span> <span class="fu">nrow</span>(bikes2), <span class="at">size =</span> <span class="dv">180</span>, <span class="at">replace =</span> F)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>train <span class="ot">=</span> bikes2[sampleIndices, ]</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>test  <span class="ot">=</span> bikes2[<span class="sc">-</span>sampleIndices, ] <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">180</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Next, fit a main effects logistic regression model that predicts prob(<code>success</code>) from <code>temp_c</code>, <code>humidity_pct</code> and <code>holiday</code> using the <code>train</code> data set. Print your model <code>tidy</code>.</li>
</ul>
<ol start="8" type="1">
<li>Edit the code chunk below, specifically renaming <code>model_fit</code> and <code>test_data</code> where appropriate. Un-comment and run to find the predicted probabilities of financially successful days in the <code>test</code> data frame.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># prediction = predict(model_fit, test_data, type = "prob")</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># test_result = test_data %&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(predicted_prob_success = prediction$.pred_1)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, building on your <code>test_result</code> data frame, create a new column that classifies a day as successful if the predicted probability is above 50%. Repeat with a decision boundary of 75% and 90%.</p>
<p>How many false positives do you have in each case? False negatives? If you were to use your model as a marker of how well the company is doing to decide whether to hold or sell your shares which decision boundary would you prefer and why?</p>
<p>Note: your narrative should read, e.g.: “With a decision boundary of 50%, my model yields X false positives and Y false negatives. With a decision boundary of 75%…” etc.</p>
</section>
</section>
<section id="formatting" class="level2">
<h2 class="anchored" data-anchor-id="formatting">Formatting</h2>
<p><strong>Reminder</strong>: For all assignments in this course there is a “formatting” component to the grade. To receive full points for “formatting”, you must:</p>
<p>&nbsp;1. Have your name at the top of the rendered document</p>
<p>&nbsp;2. Pipes <code>%&gt;%</code> and ggplot layers <code>+</code> should be followed by a newline (see formatting above)</p>
<p>&nbsp;3. Your code should be under the 80 character code limit. (You shouldn’t have to scroll to see all your code on the rendered document).</p>
<p>&nbsp;4. All exercises and corresponding pages should be linked on gradescope.</p>
<p>These necessary “tidyverse” style choices are good general practice and will help make your code more legible. For a more extensive list of recommended guidelines, <a href="https://style.tidyverse.org/">click here</a>.</p>
</section>
<section id="submitting-to-gradescope" class="level2">
<h2 class="anchored" data-anchor-id="submitting-to-gradescope">Submitting to gradescope</h2>
<p>Once you are fully satisfied with your lab, render to .pdf to create a .pdf document. You may notice that the formatting/theme of the report has changed – this is expected. Remember – you must turn in a .pdf file to the Gradescope page before the submission deadline for credit. To submit your assignment:</p>
<ul>
<li><p>Go to <a href="http://www.gradescope.com">http://www.gradescope.com</a> and click Log in in the top right corner. - Click <code>School Credentials</code>, <code>Duke NetID</code> and log in using your NetID credentials.</p></li>
<li><p>Click on your STA 101 course.</p></li>
<li><p>Click on the assignment, and you’ll be prompted to submit it.</p></li>
<li><p>Mark the pages associated with each exercise. All of the papers of your lab should be associated with at least one question (i.e., should be “checked”). Select the first page of your .pdf submission to be associated with the “Formatting” section.</p></li>
</ul>
</section>
<section id="grading" class="level2">
<h2 class="anchored" data-anchor-id="grading">Grading</h2>
<p>Total: 50 pts.</p>
<pre><code>Exercise 1: 2pts

Exercise 2: 5pts

Exercise 3: 7pts

Exercise 4: 7pts

Exercise 5: 9pts

Exercise 6: 3pts

Exercise 7: 6pts

Exercise 8: 7pts

Workflow and formatting:  4pts</code></pre>
</section>


<div id="quarto-appendix" class="default"><section class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1" role="doc-endnote"><p>Sathishkumar V E, Jangwoo Park, and Yongyun Cho. ‘Using data mining techniques for bike sharing demand prediction in metropolitan city.’ Computer Communications, Vol.153, pp.353-366, March, 2020; Sathishkumar V E and Yongyun Cho. ‘A rule-based model for Seoul Bike sharing demand prediction using weather data’ European Journal of Remote Sensing, pp.&nbsp;1-18, Feb, 2020<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>