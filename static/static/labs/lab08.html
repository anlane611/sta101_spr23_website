<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.38">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="STA 101">

<title>Lab 08: A good night’s sleep</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="lab08_files/libs/clipboard/clipboard.min.js"></script>
<script src="lab08_files/libs/quarto-html/quarto.js"></script>
<script src="lab08_files/libs/quarto-html/popper.min.js"></script>
<script src="lab08_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="lab08_files/libs/quarto-html/anchor.min.js"></script>
<link href="lab08_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lab08_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="lab08_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="lab08_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="lab08_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="labs2.css">
</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 08: A good night’s sleep</h1>
<p class="subtitle lead">Due Thursday November 10 at 11:59pm</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>STA 101 </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<p>By the end of this lab you will</p>
<ul>
<li>conduct hypothesis tests</li>
<li>compare hypothesis tests and confidence intervals</li>
</ul>
<section id="getting-started" class="level2">
<h2 class="anchored" data-anchor-id="getting-started">Getting started</h2>
<p>&nbsp;1. Download the lab template by pasting the code below in your <strong>console</strong>:</p>
<pre><code>download.file("https://sta101-fa22.netlify.app/static/labs/lab08_template.qmd",
              destfile = "lab08.qmd")</code></pre>
<p>&nbsp;2. Under the “Files” tab on the right hand side, click on <code>lab08.qmd</code> to open the lab template.</p>
<p>&nbsp;3. Complete the exercises below using the space provided.</p>
</section>
<section id="warm-up" class="level2">
<h2 class="anchored" data-anchor-id="warm-up">Warm up</h2>
<p>Be sure to update the YAML at the top of the document to include your name and the date.</p>
<section id="packages" class="level3">
<h3 class="anchored" data-anchor-id="packages">Packages</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<p>Load the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>sleep <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"https://sta101-fa22.netlify.app/static/labs/data/sleep.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The data we are working with today comes from Herbie Lee. Please read information about the data set <a href="https://stat.duke.edu/datasets/sleep">here</a>, where you will also find a codebook.</p>
</section>
</section>
<section id="exercises" class="level2">
<h2 class="anchored" data-anchor-id="exercises">Exercises</h2>
<section id="written-response" class="level3">
<h3 class="anchored" data-anchor-id="written-response">Written response</h3>
<ol type="1">
<li><p>In your own words, describe the differences and similarities between performing a hypothesis test and constructing a confidence interval.</p></li>
<li><p>What does it mean to “simulate under the null”? When and why do we do it?</p></li>
<li><p>Which of the following affect the p-value and why?</p></li>
</ol>
<ul>
<li>Null hypothesis</li>
<li>Alternative hypothesis</li>
<li>Observed statistic</li>
<li>Significance level (<span class="math inline">\(\alpha\)</span>)</li>
</ul>
<ol start="4" type="1">
<li>You are interested in the average time it takes for the study participant to fall asleep. You hypothesize it takes them over 35 minutes on average to fall asleep. What is wrong with the following null hypothesis?</li>
</ol>
<p><span class="math display">\[
H_0: \bar{x} = 35
\]</span></p>
</section>
<section id="practice-in-r" class="level3">
<h3 class="anchored" data-anchor-id="practice-in-r">Practice in <code>R</code></h3>
<ol start="5" type="1">
<li><p>Find the mean time it takes the participant to fall asleep. Check whether or not you can use central limit theorem to construct a 95% confidence interval to report with your estimate. For purposes of this exercise, you may consider samples of time to sleep as random. If you can use CLT, please do so to construct and report the confidence interval. Otherwise, construct a bootstrap confidence interval with <code>set.seed(5)</code> and <code>10000</code> reps. Interpret your interval in context.</p></li>
<li><p>Does the participant take more than 35 minutes on average to fall asleep? Perform a hypothesis test to investigate. What is the null? What is the alternative? Use <code>set.seed(6)</code> and <code>reps=5000</code> to simulate the null. Visualize the null distribution and shade the p-value. Be sure to label the x-axis. Make a conclusion based on significance level <span class="math inline">\(\alpha = 0.05\)</span>. Given your response from the previous exercise, does this result surprise you? Why or why not? What is the probability of rejecting the null if it’s actually true? What type of error is this (type 1 or type 2)?</p></li>
<li><p><em>Do calcium-magnesium supplements reduce median time to fall asleep?</em> Construct a hypothesis test to investigate. To begin, state the null and alternative hypothesis in words and in statistical notation. Use simulation-based inference to generate <code>5000</code> samples from the null distribution with <code>set.seed(5)</code>. Compute and state your observed statistic. Finally, compute the p-value and report it as well as significance at the alpha = 0.05 level and state your conclusion in context.</p></li>
</ol>
<ul>
<li>Hint: you will need to mutate to ensure that one of the variables is non-numeric.</li>
</ul>
<ol start="8" type="1">
<li>The more time the individual spent lying in bed, awake, and trying to sleep, the worse their overall quality of sleep. To begin investigating quality of sleep, create a new column <code>timeAwake</code> that shows the total number of minutes the individual spent in bed but not asleep. When <code>timeAwake</code> is large, sleep is awful and interrupted. Save your data frame with the new column as <code>sleep2</code>.</li>
</ol>
<p>Example: <code>TTS</code> is the time to fall asleep, <code>TBT</code> is total bed time, i.e.&nbsp;total time spent, lying in bed and trying to sleep.</p>
<p>So if the participant gets into bed at 9:00pm and then falls asleep at 9:30pm and wakes up at 1:00am and lies awake for an hour only to finally sleep until 6:00am and gets out of bed then</p>
<ul>
<li><code>TTS</code> is 30 minutes,</li>
<li><code>TBT</code> is 9 hours,</li>
<li>Total Sleep Time (<code>TST</code>) is 3.5h + 4h = 7.5 hours and the total time awake is 1.5 hours.</li>
</ul>
<ol start="9" type="1">
<li><em>Hypothesis: Most nights, the participant spends over fifty minutes lying in bed awake.</em> Construct a hypothesis test to investigate. To begin, state the null and alternative hypothesis in words and in statistical notation. Use simulation-based inference to generate <code>5000</code> samples from the null distribution with <code>set.seed(8)</code>. Compute and state your observed statistic. Finally, compute the p-value and report it as well as significance at the alpha = 0.01 level and state your conclusion in context.</li>
</ol>
<ul>
<li>Hint: start with <code>sleep2</code> from the previous exercise.</li>
</ul>
</section>
</section>
<section id="formatting" class="level2">
<h2 class="anchored" data-anchor-id="formatting">Formatting</h2>
<p><strong>Reminder</strong>: For all assignments in this course there is a “formatting” component to the grade. To receive full points for “formatting”, you must:</p>
<p>&nbsp;1. Have your name at the top of the knitted document</p>
<p>&nbsp;2. Pipes <code>%&gt;%</code> and ggplot layers <code>+</code> should be followed by a newline (see formatting above)</p>
<p>&nbsp;3. Your code should be under the 80 character code limit. (You shouldn’t have to scroll to see all your code on the knitted document).</p>
<p>&nbsp;4. All exercises and corresponding pages should be linked on gradescope.</p>
<p>These necessary “tidyverse” style choices are good general practice and will help make your code more legible. For a more extensive list of recommended guidelines, <a href="https://style.tidyverse.org/">click here</a>.</p>
</section>
<section id="submitting-to-gradescope" class="level2">
<h2 class="anchored" data-anchor-id="submitting-to-gradescope">Submitting to gradescope</h2>
<p>Once you are fully satisfied with your lab, Knit to .pdf to create a .pdf document. You may notice that the formatting/theme of the report has changed – this is expected. Remember – you must turn in a .pdf file to the Gradescope page before the submission deadline for credit. To submit your assignment:</p>
<ul>
<li><p>Go to <a href="http://www.gradescope.com">http://www.gradescope.com</a> and click Log in in the top right corner. - Click <code>School Credentials</code>, <code>Duke NetID</code> and log in using your NetID credentials.</p></li>
<li><p>Click on your STA 101 course.</p></li>
<li><p>Click on the assignment, and you’ll be prompted to submit it.</p></li>
<li><p>Mark the pages associated with each exercise. All of the papers of your lab should be associated with at least one question (i.e., should be “checked”). Select the first page of your .pdf submission to be associated with the “Formatting” section.</p></li>
</ul>
</section>
<section id="grading" class="level2">
<h2 class="anchored" data-anchor-id="grading">Grading</h2>
<p>Total: 50 pts</p>
<pre><code>Exercise 1: 3pts

Exercise 2: 3pts

Exercise 3: 4pts

Exercise 4: 2pts

Exercise 5: 7pts

Exercise 6: 10pts

Exercise 7: 7pts

Exercise 8: 3pts

Exercise 9: 7pts

Workflow and formatting:  4pts</code></pre>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>